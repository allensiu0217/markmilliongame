<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI çŸ¥è­˜å¯Œç¿ - é¦¬å¯ç¦éŸ³ç¯‡</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');
        
        :root {
            --gold: #d4af37;
            --deep-blue: #0a0a2a;
            --stage-blue: #1e3a8a;
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background: radial-gradient(circle at center, #1a1a4a 0%, #050510 100%);
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            margin: 0;
            overflow-x: hidden;
        }

        .gold-border {
            border: 2px solid var(--gold);
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.3);
        }

        .option-btn {
            background: linear-gradient(90deg, #1e3a8a 0%, #1e40af 100%);
            border: 1px solid var(--gold);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .option-btn:hover:not(:disabled) {
            background: linear-gradient(90deg, #3b82f6 0%, #1d4ed8 100%);
            transform: scale(1.02);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
        }

        .option-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .option-btn.correct {
            background: linear-gradient(90deg, #059669 0%, #10b981 100%) !important;
            animation: pulse 0.5s infinite alternate;
        }

        .option-btn.wrong {
            background: linear-gradient(90deg, #dc2626 0%, #ef4444 100%) !important;
        }

        @keyframes pulse {
            from { opacity: 1; }
            to { opacity: 0.7; }
        }

        .lifeline-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 2px solid var(--gold);
            background: #111;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: 0.3s;
        }

        .lifeline-btn:hover:not(.used) {
            background: var(--gold);
            color: black;
        }

        .lifeline-btn.used {
            border-color: #444;
            color: #444;
            cursor: not-allowed;
        }

        .prize-active {
            background: var(--gold);
            color: black;
            font-weight: bold;
            border-radius: 4px;
        }

        .milestone {
            color: white;
            text-shadow: 0 0 5px var(--gold);
        }

        #game-over-overlay {
            display: none;
            background: rgba(0,0,0,0.9);
            z-index: 100;
        }
    </style>
</head>
<body>

    <!-- é ‚éƒ¨ç‹€æ…‹æ¬„ -->
    <header class="p-4 flex justify-between items-center bg-black/40 border-b border-gold/30">
        <div>
            <h1 class="text-xl font-bold tracking-widest text-gold">AI çŸ¥è­˜å¯Œç¿ï¼šé¦¬å¯ç¦éŸ³</h1>
        </div>
        <div class="flex gap-4" id="lifelines">
            <button onclick="useLifeline('5050')" id="life-5050" class="lifeline-btn" title="50:50">50</button>
            <button onclick="useLifeline('phone')" id="life-phone" class="lifeline-btn" title="æ‰“é›»è©±">ğŸ“</button>
            <button onclick="useLifeline('audience')" id="life-audience" class="lifeline-btn" title="å•è§€çœ¾">ğŸ‘¥</button>
        </div>
    </header>

    <main class="flex-grow flex flex-col md:flex-row p-4 gap-6 max-w-7xl mx-auto w-full">
        <!-- éŠæˆ²ä¸»å€åŸŸ -->
        <div class="flex-grow flex flex-col gap-6">
            <!-- çé‡‘èˆ‡ä¸»æŒäººå°è©±å€ -->
            <div class="bg-black/40 p-4 rounded-lg border border-white/10 min-h-[120px] flex items-center justify-center text-center">
                <p id="host-message" class="text-lg italic text-blue-200">æ­£åœ¨é å‚™ç¶“æ–‡ï¼Œè«‹é¸æ‰‹å…¥åº§...</p>
            </div>

            <!-- é¡Œç›®å€ -->
            <div id="question-container" class="hidden">
                <div class="gold-border p-8 rounded-2xl bg-blue-900/20 text-center mb-8">
                    <h2 id="question-text" class="text-2xl md:text-3xl font-bold leading-relaxed">é¡Œç›®åŠ è¼‰ä¸­...</h2>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <button onclick="selectOption(0)" class="option-btn p-4 rounded-full text-left flex" id="opt-0">
                        <span class="text-gold font-bold mr-4">A:</span> <span class="opt-text"></span>
                    </button>
                    <button onclick="selectOption(1)" class="option-btn p-4 rounded-full text-left flex" id="opt-1">
                        <span class="text-gold font-bold mr-4">B:</span> <span class="opt-text"></span>
                    </button>
                    <button onclick="selectOption(2)" class="option-btn p-4 rounded-full text-left flex" id="opt-2">
                        <span class="text-gold font-bold mr-4">C:</span> <span class="opt-text"></span>
                    </button>
                    <button onclick="selectOption(3)" class="option-btn p-4 rounded-full text-left flex" id="opt-3">
                        <span class="text-gold font-bold mr-4">D:</span> <span class="opt-text"></span>
                    </button>
                </div>
            </div>

            <!-- é–‹å§‹æŒ‰éˆ• -->
            <div id="start-screen" class="flex flex-col items-center justify-center flex-grow py-20">
                <div class="text-center mb-10">
                    <h2 class="text-5xl font-bold mb-4 text-gold">é¦¬å¯ç¦éŸ³æŒ‘æˆ°</h2>
                    <p class="text-xl text-blue-100">æ·±å…¥æŸ¥è€ƒè–ç¶“ç¶“æ–‡ï¼Œè´å–æœ€é«˜æ¦®è­½ï¼</p>
                </div>
                <button onclick="startGame()" class="px-12 py-4 bg-gold text-black font-bold text-2xl rounded-full hover:bg-yellow-400 transition-all shadow-lg shadow-gold/20">
                    é–‹å§‹æŒ‘æˆ°
                </button>
            </div>

            <!-- æ§åˆ¶å€ -->
            <div id="action-bar" class="hidden flex justify-between mt-auto pt-6 border-t border-white/10">
                <button onclick="quitGame()" class="px-6 py-2 border border-red-500 text-red-500 rounded hover:bg-red-500 hover:text-white transition">æ”œå¸¶çé‡‘é›¢é–‹</button>
                <div class="text-right">
                    <p class="text-xs text-white/50 uppercase tracking-widest">ç•¶å‰çé‡‘</p>
                    <p id="current-prize-display" class="text-2xl font-bold text-gold">$0</p>
                </div>
            </div>
        </div>

        <!-- çé‡‘éšæ¢¯ -->
        <div class="w-full md:w-64 bg-black/50 p-4 rounded-xl border border-gold/30">
            <h3 class="text-center text-gold mb-4 font-bold border-b border-gold/30 pb-2">çé‡‘éšæ¢¯</h3>
            <div id="prize-ladder" class="flex flex-col-reverse gap-1 text-sm">
                <!-- ç”± JS å¡«å…… -->
            </div>
        </div>
    </main>

    <!-- çµç®—å½ˆçª— -->
    <div id="game-over-overlay" class="fixed inset-0 flex items-center justify-center p-4">
        <div class="bg-blue-950 border-2 border-gold p-8 rounded-3xl max-w-md w-full text-center shadow-2xl">
            <h2 id="over-title" class="text-4xl font-bold text-gold mb-4">éŠæˆ²çµæŸ</h2>
            <p id="over-message" class="text-xl mb-6">æŸ¥è€ƒç¶“æ–‡ï¼Œå¿…æœ‰æ”¶ç©«ï¼</p>
            <div class="bg-black/40 p-4 rounded-xl mb-6">
                <p class="text-sm text-gray-400">ç²å¾—çé‡‘</p>
                <p id="final-prize" class="text-3xl font-bold text-white">$0</p>
            </div>
            <button onclick="location.reload()" class="w-full py-3 bg-gold text-black font-bold rounded-full hover:bg-yellow-400 transition">å†æ¬¡æŒ‘æˆ°</button>
        </div>
    </div>

    <!-- æ¨¡æ“¬ Modal (ç”¨æ–¼æ•‘å‘½å·¥å…·) -->
    <div id="lifeline-modal" class="hidden fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-[200]">
        <div class="bg-blue-900 border border-gold p-6 rounded-2xl max-w-sm w-full text-center">
            <h3 id="modal-title" class="text-xl font-bold mb-4 text-gold">æ•‘å‘½å·¥å…·</h3>
            <div id="modal-content" class="text-lg mb-6 leading-relaxed">å…§å®¹</div>
            <button onclick="closeModal()" class="px-8 py-2 bg-white text-blue-900 font-bold rounded-full">äº†è§£</button>
        </div>
    </div>

    <script>
        const prizes = [
            1000, 2000, 4000, 8000, 16000, 
            32000, 64000, 125000, 250000, 512000,
            1024000, 2048000, 4096000, 8192000, 16000000
        ];

        // é¦¬å¯ç¦éŸ³é¡Œåº«
        const masterQuestions = {
            easy: [
                { q: "ã€Šé¦¬å¯ç¦éŸ³ã€‹çš„ç¬¬ä¸€å¥è©±æåˆ°ï¼Œé€™æ˜¯èª°çš„ç¦éŸ³çš„èµ·é ­ï¼Ÿ", a: ["æ‘©è¥¿", "è€¶ç©ŒåŸºç£", "å¤§è¡›", "æ–½æ´—ç´„ç¿°"], c: 1 },
                { q: "åœ¨æ› é‡å–Šè‘—èªªã€Œé å‚™ä¸»çš„é“ã€çš„äººæ˜¯èª°ï¼Ÿ", a: ["å½¼å¾—", "å®‰å¾—çƒˆ", "æ–½æ´—ç´„ç¿°", "é›…å„"], c: 2 },
                { q: "è€¶ç©Œåœ¨æ› é‡å—è©¦æ¢å¤šå°‘å¤©ï¼Ÿ", a: ["7å¤©", "12å¤©", "40å¤©", "100å¤©"], c: 2 },
                { q: "è€¶ç©Œå‘¼å¬å½¼å¾—å’Œå®‰å¾—çƒˆæ™‚ï¼Œä»–å€‘æ­£åœ¨åšä»€éº¼ï¼Ÿ", a: ["ç¨…é—œåè‘—", "æ’’ç¶²æ•é­š", "è£œç¶²", "ç¥ˆç¦±"], c: 1 },
                { q: "è€¶ç©Œé†«æ²»äº†å½¼å¾—å“ªä½è¦ªå±¬çš„ç†±ç—…ï¼Ÿ", a: ["æ¯è¦ª", "å¦»å­", "å²³æ¯", "å¥³å…’"], c: 2 },
                { q: "è€¶ç©Œåœ¨é¦¬å¯ç¦éŸ³ä¸­ï¼Œç¨±å“ªåäºŒå€‹äººç‚ºã€Œä½¿å¾’ã€ï¼Ÿ", a: ["æ³•åˆ©è³½äºº", "é–€å¾’ä¸­é¸å‡ºçš„12äºº", "æ–‡å£«", "æ’’éƒ½è©²äºº"], c: 1 },
                { q: "è€¶ç©Œå¹³éœé¢¨æµªå¾Œï¼Œé–€å¾’å½¼æ­¤èªªï¼šé€™åˆ°åº•æ˜¯èª°ï¼Œé€£é¢¨å’Œä»€éº¼ä¹Ÿè½å¾ä»–äº†ï¼Ÿ", a: ["å±±", "æ¨¹", "æµ·", "äºº"], c: 2 }
            ],
            medium: [
                { q: "æœ‰ä¸€å€‹æ‚£è¡€æ¼çš„å¥³äººï¼Œå¥¹æ‚£äº†é€™ç—…å¤šå°‘å¹´ï¼Ÿ", a: ["7å¹´", "10å¹´", "12å¹´", "38å¹´"], c: 2 },
                { q: "è€¶ç©Œè®“çšé­¯çš„å¥³å…’å¾©æ´»æ™‚ï¼Œå°å¥¹èªªäº†ä»€éº¼è©±ï¼Ÿ", a: ["æ‹‰æ³¢å°¼", "å¤§åˆ©å¤§å¤ç±³", "ä»¥æ³•å¤§", "ä»¥åˆ©ä»¥åˆ©æ‹‰é¦¬æ’’å·´å„å¤§å°¼"], c: 1 },
                { q: "è€¶ç©Œç”¨å¤šå°‘å€‹é¤…å’Œå¹¾æ¢é­šé¤µé£½äº†äº”åƒäººï¼Ÿ", a: ["äº”é¤…äºŒé­š", "ä¸ƒé¤…äºŒé­š", "åé¤…äº”é­š", "åäºŒé¤…ä¸‰é­š"], c: 0 },
                { q: "åœ¨è®Šåƒå±±ä¸Šï¼Œå“ªå…©å€‹äººå‡ºç¾åœ¨è€¶ç©Œèº«é‚Šï¼Ÿ", a: ["äºä¼¯æ‹‰ç½•å’Œæ‘©è¥¿", "æ‘©è¥¿å’Œä»¥åˆ©äº", "å¤§è¡›å’Œæ‰€ç¾…é–€", "ä»¥è«¾å’ŒæŒªäº"], c: 1 },
                { q: "è€¶ç©Œæ›¾æ²»å¥½ä¸€å€‹è€³è¾èˆŒçµçš„äººï¼Œå°ä»–èªªã€Œä»¥æ³•å¤§ã€ï¼Œé€™æ˜¯ä»€éº¼æ„æ€ï¼Ÿ", a: ["å¹³å®‰äº†", "é–‹äº†å§", "èµ·ä¾†å§", "ç¥èˆ‡ä½ åŒåœ¨"], c: 1 },
                { q: "è€¶ç©Œèªªï¼šã€Œé§±é§ç©¿éä»€éº¼çš„çœ¼ï¼Œæ¯”è²¡ä¸»é€²ç¥çš„åœ‹é‚„å®¹æ˜“å‘¢ï¼Ÿã€", a: ["é‡", "åŸé–€", "ç¹©å­", "çª—æˆ¶"], c: 0 },
                { q: "è€¶ç©Œé€²å…¥è€¶è·¯æ’’å†·æ™‚ï¼Œæ˜¯é¨è‘—ä»€éº¼é€²å»çš„ï¼Ÿ", a: ["é¦¬", "é§±é§", "é©¢é§’", "è»Š"], c: 2 }
            ],
            hard: [
                { q: "é¦¬å¯ç¦éŸ³ä¸­ï¼Œå“ªä¸€å€‹é–€å¾’åœ¨è€¶ç©Œå—å¯©æ™‚ä¸‰æ¬¡ä¸èªä¸»ï¼Ÿ", a: ["ç´„ç¿°", "çŒ¶å¤§", "é›…å„", "å½¼å¾—"], c: 3 },
                { q: "åœ¨å®¢è¥¿é¦¬å°¼åœ’ï¼Œè€¶ç©Œç¥ˆç¦±æ™‚ç¨±å‘¼ç¥ç‚ºä»€éº¼ï¼Ÿ", a: ["è€¶å’Œè¯", "é˜¿çˆ¸ã€çˆ¶", "ä¸»å•Š", "è¬è»ä¹‹ä¸»"], c: 1 },
                { q: "è€¶ç©Œåœ¨åå­—æ¶ä¸Šï¼Œç´„åœ¨ä»€éº¼æ™‚å€™å¤§è²å–Šå«ã€Œæˆ‘çš„ç¥ï¼Œæˆ‘çš„ç¥ï¼Œç‚ºä»€éº¼é›¢æ£„æˆ‘ï¼Ÿã€", a: ["å·³åˆ", "åˆæ­£", "ç”³åˆ", "é…‰æ™‚"], c: 2 },
                { q: "é¦¬å¯ç¦éŸ³è¨˜è¼‰ï¼Œè€¶ç©Œæ­»å¾Œï¼Œèª°å»å‘å½¼æ‹‰å¤šæ±‚è€¶ç©Œçš„èº«é«”ï¼Ÿ", a: ["å°¼å“¥åº•æ¯", "æŠ¹å¤§æ‹‰çš„é¦¬åˆ©äº", "äºåˆ©é¦¬å¤ªçš„ç´„ç‘Ÿ", "å½¼å¾—"], c: 2 },
                { q: "è€¶ç©Œèªªï¼šã€Œäººå­ä¾†ï¼Œä¸æ˜¯è¦å—äººçš„ä¼ºå€™ï¼Œä¹ƒæ˜¯è¦ä¼ºå€™äººï¼Œä¸¦ä¸”è¦æ¨å‘½ä½œå¤šäººçš„ä»€éº¼ï¼Ÿã€", a: ["ä¸­ä¿", "è´–åƒ¹", "å›ç‹", "ç¥­ç‰©"], c: 1 },
                { q: "è€¶ç©Œåœ¨è–æ®¿è£¡çœ‹è‘—çœ¾äººæŠ•éŒ¢ï¼Œç¨±è®šä¸€å€‹å¯¡å©¦æŠ•äº†å¤šå°‘éŒ¢ï¼Ÿ", a: ["ä¸€å€‹å¤§éŒ¢", "å…©å€‹å°éŒ¢", "åå€‹éŠ€å¹£", "ä¸€è¢‹é‡‘å­"], c: 1 },
                { q: "è€¶ç©Œè¢«é‡˜åå­—æ¶æ™‚ï¼Œæœ‰ä¸€å€‹ç™¾å¤«é•·èªªã€Œé€™äººçœŸæ˜¯ç¥çš„å…’å­ã€ï¼Œä»–ç•¶æ™‚åœ¨å“ªè£¡ï¼Ÿ", a: ["åå­—æ¶ä¸‹é¢å°è€¶ç©Œç«™è‘—", "å®˜åºœè£¡", "è–æ®¿ä¸­", "åŸç‰†ä¸Š"], c: 0 }
            ]
        };

        let questionsPool = []; // å­˜æ”¾æœ¬æ¬¡éŠæˆ²éš¨æ©Ÿå‡ºçš„15é¡Œ
        let currentLevel = 0;
        let lifelines = { '5050': true, 'phone': true, 'audience': true };
        let isLocked = false;

        const hostMessages = [
            "æ­¡è¿ä¾†åˆ°ã€Šé¦¬å¯ç¦éŸ³ã€‹å°ˆå ´ï¼é¡˜è–éˆé–‹å•Ÿæˆ‘å€‘çš„æ™ºæ…§ï¼Œè®“æˆ‘å€‘é–‹å§‹ç¬¬ä¸€é¡Œã€‚",
            "å¾ˆå¥½ï¼Œé€™åªæ˜¯èµ·é ­ï¼Œè®“æˆ‘å€‘ç¹¼çºŒæŸ¥è€ƒã€‚",
            "è–ç¶“èªªï¼Œå°‹æ‰¾çš„å°±å°‹è¦‹ã€‚ä½ ç¾åœ¨æ­£èµ°åœ¨æ­£ç¢ºçš„é“è·¯ä¸Šã€‚",
            "çé‡‘æ­£åœ¨å¢åŠ ï¼Œå°ç¶“æ–‡çš„ç†è§£ä¹Ÿè¶Šä¾†è¶Šæ·±ã€‚",
            "é€™æ˜¯ç¬¬ä¸€é“å®‰å…¨ç¶²ï¼Œè´ä¸‹å®ƒï¼Œä½ å°±æ“æœ‰äº† $16,000 çš„è¦‹è­‰ï¼",
            "ç¬¬ä¸€éšæ®µå®Œæˆï¼ç¾åœ¨é›£åº¦æœƒç¨å¾®æå‡ï¼Œä½ é å‚™å¥½äº†å—ï¼Ÿ",
            "ä¸­ç­‰é›£åº¦çš„è€ƒé©—ï¼Œé€™éœ€è¦ä½ å°ç´°ç¯€æœ‰æ›´å¤šçš„ç•™æ„ã€‚",
            "æ²’éŒ¯ï¼ç¥çš„è©±èªæ˜¯æˆ‘å€‘è…³å‰çš„ç‡ˆï¼Œè·¯ä¸Šçš„å…‰ã€‚",
            "è§€çœ¾å€‘éƒ½åœ¨å±æ¯ä»¥å¾…ï¼Œä½ æ˜¯å¦èƒ½é€²å…¥å‰ååçš„è¡Œåˆ—ï¼Ÿ",
            "é€™æ˜¯åƒ¹å€¼ $512,000 çš„é—œéµé¡Œï¼Œç­”å°å®ƒï¼Œå®‰å…¨ç¶²å°±æœƒé–å®šï¼",
            "å¥‡è¹Ÿç™¼ç”Ÿäº†ï¼ä½ é€²å…¥äº†å·”å³°æŒ‘æˆ°è³½ã€‚å‰©ä¸‹çš„é¡Œç›®å°‡è€ƒé©—ä½ æŸ¥ç¶“çš„æ·±åº¦ã€‚",
            "é€™æ˜¯ç™¾è¬ç´šåˆ¥çš„å°è©±ï¼Œæ¯ä¸€å€‹å­—éƒ½è¦ä»”ç´°æ¨æ•²ã€‚",
            "éå¸¸å†·åƒ»çš„ç¶“æ–‡ç´°ç¯€...ä½ æ˜¯å¦è¦å°‹æ±‚æ•‘åŠ©ï¼Ÿ",
            "å€’æ•¸ç¬¬äºŒé¡Œï¼ä½ å·²ç¶“å¿«è¦å®Œæˆé€™å ´å±¬éˆçš„å£¯èˆ‰äº†ã€‚",
            "æœ€å¾Œä¸€é—œã€‚å¥³å£«å€‘å…ˆç”Ÿå€‘ï¼Œä»Šæ™šï¼Œæˆ‘å€‘èƒ½è¦‹è­‰ä¸€ä½ã€Šé¦¬å¯ç¦éŸ³ã€‹å¤§å¸«çš„èª•ç”Ÿå—ï¼Ÿ"
        ];

        // éš¨æ©Ÿé¸é¡Œä¸é‡è¤‡é‚è¼¯
        function prepareQuestions() {
            const selected = [];
            const helper = (list, count) => {
                const copy = [...list];
                for(let i=0; i<count; i++) {
                    const idx = Math.floor(Math.random() * copy.length);
                    selected.push(copy.splice(idx, 1)[0]);
                }
            };
            helper(masterQuestions.easy, 5);
            helper(masterQuestions.medium, 5);
            helper(masterQuestions.hard, 5);
            return selected;
        }

        // åˆå§‹åŒ–çé‡‘éšæ¢¯ UI
        function initLadder() {
            const ladder = document.getElementById('prize-ladder');
            ladder.innerHTML = ''; // æ¸…ç©º
            prizes.forEach((amount, index) => {
                const div = document.createElement('div');
                div.id = `prize-step-${index}`;
                div.className = "flex justify-between px-3 py-1 border border-white/5 transition-all";
                if (index === 4 || index === 9 || index === 14) div.classList.add('milestone');
                div.innerHTML = `<span>${index + 1}</span> <span>$${amount.toLocaleString()}</span>`;
                ladder.appendChild(div);
            });
        }

        function startGame() {
            questionsPool = prepareQuestions(); // æœ¬æ¬¡éŠæˆ²é¡Œç›®éš¨æ©ŸåŒ–
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('question-container').classList.remove('hidden');
            document.getElementById('action-bar').classList.remove('hidden');
            loadQuestion();
        }

        function loadQuestion() {
            isLocked = false;
            const qData = questionsPool[currentLevel];
            
            // æ›´æ–° UI
            document.getElementById('host-message').innerText = hostMessages[currentLevel];
            document.getElementById('question-text').innerText = qData.q;
            
            const options = document.querySelectorAll('.option-btn');
            options.forEach((btn, i) => {
                btn.classList.remove('correct', 'wrong', 'hidden');
                btn.querySelector('.opt-text').innerText = qData.a[i];
                btn.style.opacity = "1";
            });

            // æ›´æ–°éšæ¢¯é«˜äº®
            document.querySelectorAll('#prize-ladder div').forEach(d => d.classList.remove('prize-active'));
            document.getElementById(`prize-step-${currentLevel}`).classList.add('prize-active');
            
            // æ›´æ–°çé‡‘é¡¯ç¤º
            document.getElementById('current-prize-display').innerText = `$${(currentLevel > 0 ? prizes[currentLevel-1] : 0).toLocaleString()}`;
        }

        function selectOption(index) {
            if (isLocked) return;
            isLocked = true;
            
            const correctIndex = questionsPool[currentLevel].c;
            const selectedBtn = document.getElementById(`opt-${index}`);
            
            document.getElementById('host-message').innerText = "æœ€å¾Œç­”æ¡ˆ...ï¼Ÿ";
            
            setTimeout(() => {
                if (index === correctIndex) {
                    selectedBtn.classList.add('correct');
                    document.getElementById('host-message').innerText = `æ­£ç¢ºï¼ä½ å°ç¶“æ–‡çš„èªè­˜ä»¤äººè®šå˜†ã€‚`;
                    
                    setTimeout(() => {
                        currentLevel++;
                        if (currentLevel >= 15) {
                            showEndGame(true);
                        } else {
                            loadQuestion();
                        }
                    }, 2000);
                } else {
                    selectedBtn.classList.add('wrong');
                    document.getElementById(`opt-${correctIndex}`).classList.add('correct');
                    document.getElementById('host-message').innerText = "å¾ˆéºæ†¾ï¼Œå»ºè­°å¯ä»¥å†å¤šç¿»é–±é¦¬å¯ç¦éŸ³...";
                    setTimeout(() => showEndGame(false), 2000);
                }
            }, 1200);
        }

        function useLifeline(type) {
            if (!lifelines[type] || isLocked || currentLevel === 14) return;
            
            lifelines[type] = false;
            document.getElementById(`life-${type}`).classList.add('used');
            
            const correctIndex = questionsPool[currentLevel].c;

            if (type === '5050') {
                let indices = [0, 1, 2, 3].filter(i => i !== correctIndex);
                indices.sort(() => Math.random() - 0.5);
                indices.slice(0, 2).forEach(idx => {
                    document.getElementById(`opt-${idx}`).classList.add('hidden');
                });
                showModal("50:50 å·²ä½¿ç”¨", "æˆ‘å€‘ç‚ºä½ é™¤å»äº†å…©å€‹å¹²æ“¾çš„é¸é …ã€‚");
            } 
            else if (type === 'phone') {
                const isCorrect = Math.random() < 0.8;
                const answer = isCorrect ? questionsPool[currentLevel].a[correctIndex] : questionsPool[currentLevel].a[(correctIndex+1)%4];
                showModal("è«®è©¢ç¶“å­¸å°ˆå®¶", `å°ˆå®¶èªªï¼šã€Œæ ¹æ“šé¦¬å¯ç¦éŸ³çš„è¨˜è¼‰ï¼Œæˆ‘å¾ˆæœ‰ä¿¡å¿ƒç­”æ¡ˆæ‡‰è©²æ˜¯ <b>${answer}</b>ã€‚ã€`);
            } 
            else if (type === 'audience') {
                let votes = [0, 0, 0, 0];
                let remaining = 100;
                const weight = [15, 30, 45, 70][Math.min(currentLevel/4 | 0, 3)]; 
                votes[correctIndex] = Math.floor(Math.random() * (100 - weight)) + weight;
                remaining -= votes[correctIndex];
                for(let i=0; i<3; i++) {
                    let idx = (correctIndex + 1 + i) % 4;
                    let v = Math.floor(Math.random() * remaining);
                    votes[idx] = v;
                    remaining -= v;
                }
                votes[(correctIndex + 3) % 4] += remaining;
                let pollText = votes.map((v, i) => `${String.fromCharCode(65+i)}: ${v}%`).join("<br>");
                showModal("è‚¢é«”å€‘çš„å»ºè­°", `æœƒçœ¾æŠ•ç¥¨çµæœå¦‚ä¸‹ï¼š<br><br>${pollText}`);
            }
        }

        function quitGame() {
            if (isLocked) return;
            const currentPrize = currentLevel > 0 ? prizes[currentLevel-1] : 0;
            showEndGame(false, currentPrize, "å¹³å®‰é›¢å»ã€‚ä½ åœ¨ç¥çš„è©±èªä¸Šå·²ç¶“å¤§æœ‰é•·é€²ï¼");
        }

        function showEndGame(win, forcePrize = null, customMsg = null) {
            document.getElementById('game-over-overlay').style.display = 'flex';
            let finalPrize = 0;
            if (win) {
                finalPrize = 16000000;
                document.getElementById('over-title').innerText = "å±¬éˆå¤§å¸«èª•ç”Ÿï¼";
                document.getElementById('over-message').innerText = "å“ˆåˆ©è·¯äºï¼ä½ å·²ç¶“å®Œå…¨æŒæ¡äº†é¦¬å¯ç¦éŸ³ã€‚";
            } else if (forcePrize !== null) {
                finalPrize = forcePrize;
                document.getElementById('over-title').innerText = "æŒ‘æˆ°çµæŸ";
                document.getElementById('over-message').innerText = customMsg;
            } else {
                if (currentLevel >= 10) finalPrize = 512000;
                else if (currentLevel >= 5) finalPrize = 16000;
                document.getElementById('over-title').innerText = "å†æ¥å†å²";
                document.getElementById('over-message').innerText = "ç¶“æ–‡æŸ¥è€ƒå°šæœªæˆåŠŸï¼Œé–€å¾’ä»é ˆåŠªåŠ›ï¼";
            }
            document.getElementById('final-prize').innerText = `$${finalPrize.toLocaleString()}`;
        }

        function showModal(title, content) {
            document.getElementById('modal-title').innerHTML = title;
            document.getElementById('modal-content').innerHTML = content;
            document.getElementById('lifeline-modal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('lifeline-modal').classList.add('hidden');
        }

        window.onload = initLadder;
    </script>
</body>
</html>
